<!doctype html>
<html lang="en">

<head>
	<title>Heating</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<script>
		var wsId = Math.floor(Math.random() * 2000000000)
		var ws = new WebSocket("ws://127.0.0.1:8000/heating/ws/" + wsId)
		ws.onmessage = function (event) {
			var msg = JSON.parse(event.data)
			document.getElementById(msg.id).innerHTML = msg.value
		}
		function send_value(value) {
			console.info(value)
			ws.send(JSON.stringify(value))
		}
	</script>
</head>

<body>
	<div id="temperatures">
		<p id="new_temperature_text">New water temperature: <input type="number" step="0.05" id="new_temperature"
				onchange="send_value(this.value)"></p>
		<p>Cold water temperature: <span id="cold"></span>째C</p>
		<p>Mixed water temperature: <span id="mixed"></span>째C</p>
		<p>Hot water temperature: <span id="hot"></span>째C</p>
		<p>Target water temperature: <span id="target"></span>째C</p>
		<p>Integral value: <span id="integral"></span></p>
		<p>PID output: <span id="pid_output"></span></p>
		<p>Kp: <input type="number" step="0.01" id="kp" onchange="send_value('Kp ' + this.value)"></p>
		<p>Ki: <input type="number" step="0.01" id="ki" onchange="send_value('Ki ' + this.value)"></p>
		<p>Kd: <input type="number" step="0.01" id="kd" onchange="send_value('Kd ' + this.value)"></p>
	</div>
</body>

</html>